# –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

## –û–±–∑–æ—Ä
–î–æ–∫—É–º–µ–Ω—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞—á –∏ –ø—Ä–æ–≥—Ä–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ Runterra.

## –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2026-02-04
- **–¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–±–µ–∂–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ ‚Äî –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–∞—Ä—à—Ä—É—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤–æ –≤—Ä–µ–º—è –±–µ–≥–∞ (mobile):** –í —Å–æ—Å—Ç–æ—è–Ω–∏–∏ running —ç–∫—Ä–∞–Ω–∞ Run –¥–æ–±–∞–≤–ª–µ–Ω–∞ –∫–∞—Ä—Ç–∞ (Yandex MapKit) —Å –ø–æ–ª–∏–ª–∏–Ω–∏–µ–π –º–∞—Ä—à—Ä—É—Ç–∞ –∏–∑ GPS-—Ç–æ—á–µ–∫ —Å–µ—Å—Å–∏–∏. –í–∏–¥–∂–µ—Ç `RunRouteMap` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç `gpsPoints`, —Ä–∏—Å—É–µ—Ç –ø–æ–ª–∏–ª–∏–Ω–∏—é –ø—Ä–∏ –¥–≤—É—Ö –∏ –±–æ–ª–µ–µ —Ç–æ—á–∫–∞—Ö; –∫–∞–º–µ—Ä–∞ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –ø–æ—è–≤–ª–µ–Ω–∏–∏ —Ç–æ—á–∫–∏ —Ü–µ–Ω—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –Ω–µ–π (zoom 16), –ø—Ä–∏ –ø–æ—è–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–æ—á–µ–∫ —Å–ª–µ–¥—É–µ—Ç –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π –ø–æ–∑–∏—Ü–∏–µ–π. –ù–∞—á–∞–ª—å–Ω–∞—è –ø–æ–∑–∏—Ü–∏—è –∫–∞—Ä—Ç—ã –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ—á–µ–∫ ‚Äî —Ü–µ–Ω—Ç—Ä —Ç–µ–∫—É—â–µ–≥–æ –≥–æ—Ä–æ–¥–∞ (CurrentCityService) –∏–ª–∏ –°–ü–±. Backend –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md), [changes/maps.md](changes/maps.md).
- **Code review ‚Äî –¢—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–±–µ–∂–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–µ:** –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏. –ù–∞–π–¥–µ–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: –≤ `run_screen.dart` –≤ –º–µ—Ç–æ–¥–µ `_buildRunningContent()` –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è GPS-—Å—Ç–∞—Ç—É—Å–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏—Å—å –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ `Icon(Icons.location_on)` –∏ —ç–º–æ–¥–∑–∏ `üìç` –≤ —Ç–µ–∫—Å—Ç–µ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∫–æ–Ω–∫–∏). –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: —ç–º–æ–¥–∑–∏ —É–¥–∞–ª—ë–Ω –∏–∑ —Ç–µ–∫—Å—Ç–∞, –æ—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ Material-–∏–∫–æ–Ω–∫–∞. –û—Å—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞: –≤–∏–¥–∂–µ—Ç `RunRouteMap` –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å—Ç—Ä–æ–∏—Ç –ø–æ–ª–∏–ª–∏–Ω–∏—é, —Å–ª–µ–¥—É–µ—Ç –∑–∞ –±–µ–≥—É–Ω–æ–º, –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç fallback –Ω–∞ —Ü–µ–Ω—Ç—Ä –≥–æ—Ä–æ–¥–∞. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md).
- **–í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞ –∏ –°–æ–±—ã—Ç–∏—è –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞:** (1) –í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞: –≤ GET `/api/users/me/profile` –¥–æ–±–∞–≤–ª–µ–Ω–æ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ `cityName` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –≥–æ—Ä–æ–¥–æ–≤ (`findCityById(user.cityId)?.name`); –≤ ProfileScreen –±–ª–æ–∫ ¬´–ì–æ—Ä–æ–¥¬ª –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç –Ω–∞–∑–≤–∞–Ω–∏–µ –≥–æ—Ä–æ–¥–∞ (cityName –∏–ª–∏ fallback –Ω–∞ cityId). (2) –°–æ–±—ã—Ç–∏—è –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞: –¥–æ–±–∞–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `005_seed_example_events.sql` ‚Äî –≤—Å—Ç–∞–≤–∫–∞ 5 –¥–µ–º–æ-—Å–æ–±—ã—Ç–∏–π –¥–ª—è –≥–æ—Ä–æ–¥–∞ spb (group_run, training, club_event), –¥–∞—Ç—ã –≤ –±—É–¥—É—â–µ–º, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö –°–ü–±; –ø–æ—Å–ª–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π –∏ –∫–∞—Ä—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –ø—Ä–∏–º–µ—Ä—ã. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/users.md](changes/users.md), [changes/events.md](changes/events.md).
- **Code review ‚Äî –í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞ –∏ –°–æ–±—ã—Ç–∏—è –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞:** –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏. –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–æ: (1) Backend `users.routes.ts:87` ‚Äî –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ `cityName` –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ; (2) –ú–∏–≥—Ä–∞—Ü–∏—è `005_seed_example_events.sql` ‚Äî –∫–æ–ª–æ–Ω–∫–∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —Å—Ö–µ–º–µ events, –∑–Ω–∞—á–µ–Ω–∏—è —Ç–∏–ø–æ–≤/—Å—Ç–∞—Ç—É—Å–æ–≤ –≤–∞–ª–∏–¥–Ω—ã, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã –≤ –≥—Ä–∞–Ω–∏—Ü–∞—Ö SPB (lon 29.6‚Äì30.6, lat 59.7‚Äì60.1), UUID –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ, idempotent —á–µ—Ä–µ–∑ `ON CONFLICT`; (3) Mobile `profile_screen.dart` ‚Äî fallback –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –≥–æ—Ä–æ–¥–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞ (`cityName ?? cityId ?? l10n.cityNotSelected`); (4) `ProfileModel.cityName` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–∞—Ä—Å–∏—Ç—Å—è –∏–∑ JSON. –û—à–∏–±–æ–∫ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ.
- **Code review ‚Äî –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏:** –ü—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —ç–∫—Ä–∞–Ω–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–±–µ–∂–∫–∏. –ù–∞–π–¥–µ–Ω–∞ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–¥–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞: –≤ –º–µ—Ç–æ–¥–µ `_calcCalories()` –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä `duration` —É–¥–∞–ª—ë–Ω –∏–∑ —Å–∏–≥–Ω–∞—Ç—É—Ä—ã (–∫–∞–ª–æ—Ä–∏–∏ —Å—á–∏—Ç–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ ~65 –∫–∫–∞–ª/–∫–º). –û—Å—Ç–∞–ª—å–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞: —Ä–∞—Å—á—ë—Ç—ã —Ç–µ–º–ø–∞, —Å–∫–æ—Ä–æ—Å—Ç–∏, –∫–∞–ª–æ—Ä–∏–π; i18n –∫–ª—é—á–∏; layout –∫–∞—Ä—Ç–æ—á–µ–∫ –º–µ—Ç—Ä–∏–∫. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md).
- **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ ‚Äî —ç–∫—Ä–∞–Ω –∫–∞–∫ –≤ —Ñ–∏—Ç–Ω–µ—Å-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ (mobile):** –≠–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–æ–±–µ–∂–∫–∏ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω –ø–æ –æ–±—Ä–∞–∑—Ü—É Strava/Nike Run Club. –ö–∞—Ä—Ç–æ—á–∫–∏ –º–µ—Ç—Ä–∏–∫: –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –¥–∏—Å—Ç–∞–Ω—Ü–∏—è, —Ç–µ–º–ø (–º–∏–Ω/–∫–º), —Å—Ä–µ–¥–Ω—è—è —Å–∫–æ—Ä–æ—Å—Ç—å (–∫–º/—á), –∫–∞–ª–æ—Ä–∏–∏ (–ø—Ä–∏–º–µ—Ä–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ ~65 –∫–∫–∞–ª/–∫–º), –ø—É–ª—å—Å (placeholder ¬´‚Äî¬ª –ø–æ–¥ –±—É–¥—É—â—É—é Health Connect). –î–æ–±–∞–≤–ª–µ–Ω—ã helper-–º–µ—Ç–æ–¥—ã `_formatPace`, `_calcAvgSpeedKmh`, `_calcCalories`, –≤–∏–¥–∂–µ—Ç `_buildMetricCard`. i18n: runDuration, runDistance, runPace, runPaceValue, runAvgSpeed, runAvgSpeedValue, runCalories, runCaloriesValue, runHeartRate, runHeartRateValue, runNoData. Backend –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md).
- **–£–¥–∞–ª–µ–Ω–∏–µ —á–∞—Ç–∞ –≥–æ—Ä–æ–¥–∞ (backend + mobile):** –£–¥–∞–ª—ë–Ω –≥–æ—Ä–æ–¥—Å–∫–æ–π —á–∞—Ç. Backend: —É–¥–∞–ª–µ–Ω—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã GET/POST `/api/messages/global`, WebSocket –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∫–∞–Ω–∞–ª—ã `club:{clubId}`. Mobile: —É–¥–∞–ª–µ–Ω—ã GlobalChatTab, NotificationsTab (orphaned), ChatRealtimeService (orphaned, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª city-–∫–∞–Ω–∞–ª—ã); –≤–∫–ª–∞–¥–∫–∏ –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ ¬´–õ–∏—á–Ω—ã–µ¬ª / ¬´–ö–ª—É–±¬ª / ¬´–¢—Ä–µ–Ω–µ—Ä¬ª (–õ–∏—á–Ω—ã–µ –∏ –¢—Ä–µ–Ω–µ—Ä ‚Äî –∑–∞–≥–ª—É—à–∫–∏); —É–¥–∞–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã getGlobalChatMessages/sendGlobalMessage. –î–æ–±–∞–≤–ª–µ–Ω—ã l10n –∫–ª—é—á–∏ tabPersonal, tabClub, tabCoach, cityLabel, personalChatsEmpty, coachMessagesEmpty; —É–¥–∞–ª–µ–Ω—ã tabCity, tabClubs, tabNotifications, globalChatEmpty (–∫–ª—é—á–∏ noNotifications, notificationsLoadError –æ—Å—Ç–∞–ª–∏—Å—å –¥–ª—è ProfileNotificationsSection). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/messages.md](changes/messages.md).
- **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è (backend + mobile):** –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω —ç–∫—Ä–∞–Ω/—Ñ–æ—Ä–º–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. Backend: –≤ `UpdateProfileDto` –∏ `UpdateProfileSchema` –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –ø–æ–ª—è `name` (–Ω–µ–ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞, –º–∞–∫—Å. 100 —Å–∏–º–≤–æ–ª–æ–≤) –∏ `avatarUrl` (URL –∏–ª–∏ –ø—É—Å—Ç–∞—è —Å—Ç—Ä–æ–∫–∞ –¥–ª—è —Å–±—Ä–æ—Å–∞); –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ PATCH `/api/users/me/profile` –ø–µ—Ä–µ–¥–∞—ë—Ç –≤ `usersRepo.update()` –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –≤ —Ç–µ–ª–µ `name` –∏ `avatarUrl`. Mobile: —Ä–∞—Å—à–∏—Ä–µ–Ω `UsersService.updateProfile(currentCityId?, name?, avatarUrl?)`; –¥–æ–±–∞–≤–ª–µ–Ω —ç–∫—Ä–∞–Ω `EditProfileScreen` (—Ñ–æ—Ä–º–∞: –∏–º—è, URL —Ñ–æ—Ç–æ, –∫–Ω–æ–ø–∫–∞ ¬´–°–æ—Ö—Ä–∞–Ω–∏—Ç—å¬ª); –≤ ProfileScreen ‚Äî –∫–Ω–æ–ø–∫–∞ ¬´–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å¬ª –≤ AppBar, –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/profile/edit` —Å –ø–µ—Ä–µ–¥–∞—á–µ–π `profile.user` —á–µ—Ä–µ–∑ `extra`; –º–∞—Ä—à—Ä—É—Ç `/profile/edit` –≤ `app.dart`; l10n –∫–ª—é—á–∏ `editProfileTitle`, `editProfileName`, `editProfilePhotoUrl`, `editProfileSave`, `editProfileNameRequired`, `editProfileEditAction` (en/ru). –ì–æ—Ä–æ–¥ –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/users.md](changes/users.md).

### 2026-02-03
- **Fix: —ç–∫—Ä–∞–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –ø—Ä–æ–±–µ–∂–∫–∏ (mobile):** –ò—Å–ø—Ä–∞–≤–ª–µ–Ω —Ä–∞—Å—á—ë—Ç —Ç–µ–º–ø–∞, —á—Ç–æ–±—ã –Ω–µ –ø–æ–ª—É—á–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç –≤–∏–¥–∞ `m:60` –ø—Ä–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–∏–∏; –ø—Ä–∏ –æ—à–∏–±–∫–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø—Ä–æ–±–µ–∂–∫–∏ UI –≤—Å—ë —Ä–∞–≤–Ω–æ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ `completed` –ø–æ—Å–ª–µ `stopRun()` (–æ—à–∏–±–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ SnackBar), —Ñ–ª–∞–≥ `_isSubmitting` —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –≤ `finally`. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md).

### 2026-02-02
- **Fix: POST "/" ‚Üí 404/400 (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ backend + mobile):** (1) Backend: –¥–æ–±–∞–≤–ª–µ–Ω 404-–æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –¥–ª—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω—ã—Ö –º–∞—Ä—à—Ä—É—Ç–æ–≤ –≤ `app.ts` ‚Äî –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `{ code: "not_found", message: "Route not found: METHOD /path" }`; –∏—Å–ø—Ä–∞–≤–ª–µ–Ω —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–∫–∏ 500 —Å `{ error }` –Ω–∞ `{ code, message }` (ADR-0002). (2) Mobile: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ ‚Äî `RunService.submitRun()` —É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø—É—Ç—å `POST /api/runs`; —É–ª—É—á—à–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ ‚Äî –ø—Ä–∏ 400/404 –ø–∞—Ä—Å–∏—Ç—Å—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç backend (`{ code, message }`) –∏ –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è `ApiException`; –≤ `RunScreen` –ø—Ä–∏ `ApiException` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è `message` –∏–∑ –æ—Ç–≤–µ—Ç–∞ –≤–º–µ—Å—Ç–æ `e.toString()`. (3) –¢–µ—Å—Ç—ã: –æ–±–Ω–æ–≤–ª—ë–Ω `app.test.ts` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ 404 –≤–∫–ª—é—á–∞–µ—Ç —Ç–µ–ª–æ `{ code, message }`; –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Å—Ç POST "/" ‚Üí 404. –í—Å–µ 55 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md).
- **Fix: GET /api/map/data ‚Üí 401 (–æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ mobile):** –≤ `MapService.getMapData()` –¥–æ–±–∞–≤–ª–µ–Ω–æ —è–≤–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ 401 (`ApiException('unauthorized', ...)`); –≤ `MapScreen._loadMapData()` –ø—Ä–∏ 401 ‚Äî –ø–æ–ø—ã—Ç–∫–∞ –æ–±–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω (`ServiceLocator.refreshAuthToken()`) –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å; –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º 401 ‚Äî —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ —ç–∫—Ä–∞–Ω –≤—Ö–æ–¥–∞ (`context.go('/login')`). Backend –Ω–µ –∏–∑–º–µ–Ω—ë–Ω. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/maps.md](changes/maps.md).
- **Verified: GET /api/messages/global ‚Üí 400 (–Ω–µ—Ç cityId) ‚Äî —É–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** mobile (`global_chat_tab.dart`) –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç `/api/messages/global` –±–µ–∑ `cityId` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –≥–æ—Ä–æ–¥–∞ –ø–µ—Ä–µ–¥ –∑–∞–ø—Ä–æ—Å–æ–º, –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç–∫—Ä–∞–Ω ¬´–£–∫–∞–∂–∏—Ç–µ –≥–æ—Ä–æ–¥¬ª. Backend –≤–∞–ª–∏–¥–∞—Ü–∏—è (400 –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ cityId) –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞. –û—à–∏–±–∫–∏ 400 –≤ –ª–æ–≥–∞—Ö ‚Äî –æ—Ç —Å—Ç–∞—Ä—ã—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –¥–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–∫—Å–∞.
- **Fix: GET /api/me/profile ‚Üí 401 (–ø–æ—Ç–µ—Ä—è Authorization –ø—Ä–∏ 302-—Ä–µ–¥–∏—Ä–µ–∫—Ç–µ):** –∞–ª–∏–∞—Å GET `/api/me/profile` –∑–∞–º–µ–Ω—ë–Ω —Å 302-—Ä–µ–¥–∏—Ä–µ–∫—Ç–∞ –Ω–∞ –ø—Ä—è–º–æ–π forward –∑–∞–ø—Ä–æ—Å–∞ –≤ `usersRouter`. 302-—Ä–µ–¥–∏—Ä–µ–∫—Ç —Ç–µ—Ä—è–ª –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization`, –∏–∑-–∑–∞ —á–µ–≥–æ –∫–ª–∏–µ–Ω—Ç—ã, –∑–∞–ø—Ä–∞—à–∏–≤–∞—é—â–∏–µ `/api/me/profile`, –ø–æ–ª—É—á–∞–ª–∏ 401. –¢–µ–ø–µ—Ä—å –æ–±–∞ –ø—É—Ç–∏ (`/api/me/profile` –∏ `/api/users/me/profile`) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –æ–¥–Ω–∏–º handler. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/users.md](changes/users.md).
- **Code review ‚Äî 3 –±–∞–≥–∞ –≤ –∏–∑–º–µ–Ω—ë–Ω–Ω–æ–º –∫–æ–¥–µ:** (1) `run_service.dart` ‚Äî GPS-—Ç–æ—á–∫–∏ –≤ `submitRun()` –æ—Ç–ø—Ä–∞–≤–ª—è–ª–∏—Å—å —Å –ø–æ–ª—è–º–∏ `lat`/`lon`, –Ω–æ backend (`GpsPointSchema` –∏–∑ `GeoCoordinatesSchema`) –æ–∂–∏–¥–∞–µ—Ç `latitude`/`longitude`; Zod-–≤–∞–ª–∏–¥–∞—Ü–∏—è –æ—Ç–∫–ª–æ–Ω—è–ª–∞ GPS-–¥–∞–Ω–Ω—ã–µ ‚Üí –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –∏–º–µ–Ω–∞ –ø–æ–ª–µ–π. (2) `global_chat_tab.dart` ‚Äî fallback `'spb'` –≤ cityId –ø—Ä–∏–≤–æ–¥–∏–ª –∫ –≤—ã–∑–æ–≤—É messages API –¥–∞–∂–µ –∫–æ–≥–¥–∞ –≥–æ—Ä–æ–¥ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω (noCitySet); —É–±—Ä–∞–Ω fallback, –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≥–æ—Ä–æ–¥–∞ API –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, —Å—Ä–∞–∑—É –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–¥—Å–∫–∞–∑–∫–∞ ¬´–£–∫–∞–∂–∏—Ç–µ –≥–æ—Ä–æ–¥¬ª. (3) `users.routes.ts` ‚Äî —Å—Ç–∞—Ä—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (GET /, GET /:id, POST /, DELETE /me) –≤–æ–∑–≤—Ä–∞—â–∞–ª–∏ –æ—à–∏–±–∫–∏ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `{ error }` –≤–º–µ—Å—Ç–æ –µ–¥–∏–Ω–æ–≥–æ `{ code, message }` (ADR-0002); –ø—Ä–∏–≤–µ–¥–µ–Ω—ã –∫ –µ–¥–∏–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md), [changes/messages.md](changes/messages.md), [changes/users.md](changes/users.md).
- **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ –ª–æ–≥–∞–º –∏ –≤—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞ –≤ –ø—Ä–æ—Ñ–∏–ª–µ:** (1) –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è run (500, PostgreSQL 22P02): –≤ `runs.routes.ts` userId –±–µ—Ä—ë—Ç—Å—è —Ç–æ–ª—å–∫–æ –∏–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (`req.authUser.uid` ‚Üí `findByFirebaseUid`); –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–º UUID –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è 400 –≤ —Ñ–æ—Ä–º–∞—Ç–µ API (validation_error / Authentication required). (2) –ü—É—Ç—å —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–±–µ–∂–∫–∏ –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω: POST `/api/runs` –≤ `run_service.dart`, –¥–æ–±–∞–≤–ª–µ–Ω –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π –æ –∫–∞–Ω–æ–Ω–∏—á–µ—Å–∫–æ–º –ø—É—Ç–∏. (3) GET `/api/messages/global`: –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π query-–ø–∞—Ä–∞–º–µ—Ç—Ä `cityId`; –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ ‚Äî 400 —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º ¬´cityId is required¬ª; mobile –ø–µ—Ä–µ–¥–∞—ë—Ç `cityId` –≤ `getGlobalChatMessages`, –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≥–æ—Ä–æ–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–µ—Ñ–æ–ª—Ç `spb`. (4) –ï–¥–∏–Ω—ã–π –ø—É—Ç—å –ø—Ä–æ—Ñ–∏–ª—è: –¥–æ–±–∞–≤–ª–µ–Ω –∞–ª–∏–∞—Å GET `/api/me/profile` ‚Üí —Ä–µ–¥–∏—Ä–µ–∫—Ç 302 –Ω–∞ `/api/users/me/profile`. (5) –í—ã–±–æ—Ä –≥–æ—Ä–æ–¥–∞ –≤ –ª–∏—á–Ω–æ–º –∫–∞–±–∏–Ω–µ—Ç–µ: –º–∏–≥—Ä–∞—Ü–∏—è `004_users_city_id_varchar` (users.city_id UUID‚ÜíVARCHAR(64)); PATCH `/api/users/me/profile` —Å —Ç–µ–ª–æ–º `{ currentCityId? }`; –≤ `users.routes` –≤–µ–∑–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `req.authUser.uid`; mobile: –±–ª–æ–∫ ¬´–ì–æ—Ä–æ–¥¬ª –≤ ProfileScreen, –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞, `UsersService.updateProfile`, `ApiClient.patch`, —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ CurrentCityService –∏ –Ω–∞ backend; l10n –∫–ª—é—á `cityNotSelected`. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md), [changes/users.md](changes/users.md), [changes/messages.md](changes/messages.md), [changes/cities.md](changes/cities.md).
- **Code review ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –º—É–ª—å—Ç–∏-–≥–æ—Ä–æ–¥ –∫–æ–º–º–∏—Ç–µ:** 5 –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π: (1) `events.repository.ts` ‚Äî `|| undefined` –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ `?? undefined` –¥–ª—è `participantLimit`, `checkInLongitude`, `checkInLatitude` (–±–∞–≥: –∑–Ω–∞—á–µ–Ω–∏–µ `0` –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞–ª–æ—Å—å –≤ `undefined`); (2) `city_picker_dialog.dart` ‚Äî 4 —Ö–∞—Ä–¥–∫–æ–¥-—Å—Ç—Ä–æ–∫–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –≤—ã–∑–æ–≤—ã `AppLocalizations` (–¥–æ–±–∞–≤–ª–µ–Ω—ã –∫–ª—é—á–∏ `cityPickerTitle`, `cityPickerLoadError`, `cityPickerEmpty` –≤ ARB –∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ l10n-—Ñ–∞–π–ª—ã); (3) `territories.routes.ts` ‚Äî mock `cityId: 'city-1'` –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ `'spb'` –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ —Å –∫–æ–Ω—Ñ–∏–≥–æ–º –≥–æ—Ä–æ–¥–æ–≤; (4) `event_list_item_model_test.dart` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω `cityId` –≤ —Ç–µ—Å—Ç–æ–≤—ã–µ JSON –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ (–ø–æ–∫—Ä—ã—Ç–∏–µ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—è); (5) `map_screen.dart` ‚Äî —É–¥–∞–ª—ë–Ω `DevRemoteLogger.logError` –¥–ª—è —à—Ç–∞—Ç–Ω–æ–≥–æ —Å–æ–±—ã—Ç–∏—è `onMapCreated` (–æ—à–∏–±–æ—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ error-–ª–æ–≥–≥–µ—Ä–∞ –¥–ª—è info-—Å–æ–æ–±—â–µ–Ω–∏—è). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/cities.md](changes/cities.md).
- **Code review fix ‚Äî –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ i18n —Å—Ç—Ä–æ–∫–∏ –∏ deprecated API:** –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 6 —Ö–∞—Ä–¥–∫–æ–¥-—Å—Ç—Ä–æ–∫ –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –ø–æ—Å–ª–µ i18n-–º–∏–≥—Ä–∞—Ü–∏–∏: `login_screen.dart` (–æ—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞), `run_screen.dart` (—Ç–µ–∫—Å—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–µ, –∫–Ω–æ–ø–∫–∞ ¬´–ù–∞—á–∞—Ç—å –ø—Ä–æ–±–µ–∂–∫—É¬ª), `settings_section.dart` (¬´–í—ã–π—Ç–∏ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞¬ª), `club_details_screen.dart` (–∑–∞–≥–æ–ª–æ–≤–æ–∫ ¬´–ö–ª—É–±¬ª), `territory_details_screen.dart` (–ø–æ–¥–ø–∏—Å—å ¬´–°—Ç–∞—Ç—É—Å¬ª). –ó–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –≤—ã–∑–æ–≤—ã `AppLocalizations.of(context)!` —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–ª—é—á–∞–º–∏ –∏–∑ ARB. –¢–∞–∫–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã 3 –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –≤—ã–∑–æ–≤–∞ deprecated `withOpacity()` ‚Üí `Color.fromRGBO()` –≤ `events/widgets/event_card.dart`, `map/widgets/event_card.dart`, `activity_section.dart`. –î–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã–π `const` –≤ `global_chat_tab.dart`. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/i18n.md](changes/i18n.md).
- **i18n ‚Äî –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä–æ–∫ (mobile):** –≤–Ω–µ–¥—Ä–µ–Ω–∞ –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è –≤ –º–æ–±–∏–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å `flutter_localizations`, –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è l10n (`l10n.yaml`), ARB-—Ñ–∞–π–ª—ã `app_en.arb` –∏ `app_ru.arb` –≤ `mobile/l10n/`, –≥–µ–Ω–µ—Ä–∞—Ü–∏—è `AppLocalizations` –≤ `lib/l10n/`. –í `MaterialApp.router` –¥–æ–±–∞–≤–ª–µ–Ω—ã `localizationsDelegates`, `supportedLocales`, `localeResolutionCallback` (fallback –Ω–∞ `ru`). –í—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ç—Ä–æ–∫–∏ –≤ —ç–∫—Ä–∞–Ω–∞—Ö –∏ –≤–∏–¥–∂–µ—Ç–∞—Ö –∑–∞–º–µ–Ω–µ–Ω—ã –Ω–∞ –≤—ã–∑–æ–≤—ã `AppLocalizations.of(context)!`. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ª–æ–∫–∞–ª–∏: —Ä—É—Å—Å–∫–∏–π (ru), –∞–Ω–≥–ª–∏–π—Å–∫–∏–π (en). –°–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö (—Ç–∞–π–º–∞—É—Ç, —Å–µ—Ç—å, –≥–µ–æ–ª–æ–∫–∞—Ü–∏—è, –ø—Ä–æ–±–µ–∂–∫–∞) –∏ –∫–æ–¥—ã API –ª–æ–∫–∞–ª–∏–∑—É—é—Ç—Å—è –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/i18n.md](changes/i18n.md).
- **Background GPS ‚Äî —Ç—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–±–µ–∂–∫–∏ –≤ —Ñ–æ–Ω–µ (–∏—Å–ø—Ä–∞–≤–ª–µ–Ω):** –ø–∞–∫–µ—Ç `background_location:0.13.2` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Å—Ç–∞—Ä–µ–≤—à–∏–π Flutter plugin embedding v1 (`Registrar`) –∏ –Ω–µ –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è —Å —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–µ–π Flutter. –ó–∞–º–µ–Ω—ë–Ω –Ω–∞ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π foreground service geolocator_android (`AndroidSettings.foregroundNotificationConfig`): –ø—Ä–∏ `startTracking(background: true)` geolocator —Å—Ç–∞—Ä—Ç—É–µ—Ç foreground service —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º ¬´Runterra ‚Äî Run in progress¬ª, GPS-—Ç—Ä–µ–∫–∏–Ω–≥ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –£–¥–∞–ª–µ–Ω—ã: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å background_location –∏–∑ pubspec.yaml, –ø—Ä–∏–≤–∞—Ç–Ω—ã–π –º–µ—Ç–æ–¥ `_locationToPosition`, —Ñ–ª–∞–≥ `_isBackgroundTracking`. –†–∞–∑—Ä–µ—à–µ–Ω–∏—è FOREGROUND_SERVICE, FOREGROUND_SERVICE_LOCATION, ACCESS_BACKGROUND_LOCATION, POST_NOTIFICATIONS –≤ AndroidManifest —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã. `compileSdk` –ø–æ–¥–Ω—è—Ç —Å 35 –¥–æ 36 (—Ç—Ä–µ–±–æ–≤–∞–Ω–∏–µ geolocator_android, google_sign_in_android, flutter_plugin_android_lifecycle). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md).
- **–ß–∞—Ç ‚Äî real-time —Å–æ–æ–±—â–µ–Ω–∏—è:** —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –¥–æ—Å—Ç–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –¥–ª—è –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ —á–∞—Ç–∞. Backend: –º–∏–≥—Ä–∞—Ü–∏—è 002_messages (—Ç–∞–±–ª–∏—Ü–∞ messages), –º–æ–¥—É–ª—å messages (entity, DTO, Zod-—Å—Ö–µ–º–∞, —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π), REST API GET/POST /api/messages/global –∏ GET/POST /api/messages/clubs/:clubId, WebSocket-—Å–µ—Ä–≤–µ—Ä –Ω–∞ –ø—É—Ç–∏ /ws (auth –ø–æ query token, –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª—ã city:{cityId} –∏ club:{clubId}, broadcast –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏—è). Mobile: –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å web_socket_channel, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è getGlobalChatMessages –∏ sendGlobalMessage –≤ MessagesService, ChatRealtimeService –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ WebSocket –∏ —Å—Ç—Ä–∏–º–∞ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π, GlobalChatTab ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞ + –ø—Ä–æ—Ñ–∏–ª—å –¥–ª—è cityId, –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ real-time, –ø–æ–ª–µ –≤–≤–æ–¥–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/messages.md](changes/messages.md).
- **–ß–∞—Ç ‚Äî –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ code review:** –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –ø–æ—Ä—è–¥–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ GlobalChatTab (reverse –Ω–∞—á–∞–ª—å–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ DESC‚ÜíASC –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å reverse ListView). Backend WebSocket: uid –∏–∑ —Ç–æ–∫–µ–Ω–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∫–∞–Ω–∞–ª–∞ –ø—Ä–∏ subscribe (regex —Ñ–æ—Ä–º–∞—Ç–∞, –ø—Ä–æ–≤–µ—Ä–∫–∞ cityId –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è city-–∫–∞–Ω–∞–ª–æ–≤), –¥–æ–±–∞–≤–ª–µ–Ω closeChatWs() –¥–ª—è graceful shutdown. REST API: –¥–æ–±–∞–≤–ª–µ–Ω–∞ auth-–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ GET /clubs/:clubId, –¥–æ–±–∞–≤–ª–µ–Ω–∞ parsePagination() —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç NaN/–æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã—Ö/–ø—Ä–µ–≤—ã—à–∞—é—â–∏—Ö –ª–∏–º–∏—Ç –∑–Ω–∞—á–µ–Ω–∏–π. Mobile: _toWsUrl –±–æ–ª—å—à–µ –Ω–µ –ø—Ä–∏–≤–æ–¥–∏—Ç –≤–µ—Å—å URL –∫ lowercase (—Ç–æ–ª—å–∫–æ —Å—Ö–µ–º—É). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/messages.md](changes/messages.md).
- **–ß–∞—Ç ‚Äî fix Unhandled Exception user_city_required (logcat):** –≤ GlobalChatTab._fetchData() –ø—Ä–æ—Ñ–∏–ª—å –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–µ—Ä–≤—ã–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è cityId; –µ—Å–ª–∏ –≥–æ—Ä–æ–¥ –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω ‚Äî messages API –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è, –≤–º–µ—Å—Ç–æ –∫—Ä–∞—Å–Ω–æ–π –æ—à–∏–±–∫–∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –¥—Ä—É–∂–µ–ª—é–±–Ω—ã–π —ç–∫—Ä–∞–Ω ¬´–£–∫–∞–∂–∏—Ç–µ –≥–æ—Ä–æ–¥ –≤ –ø—Ä–æ—Ñ–∏–ª–µ¬ª —Å –∫–Ω–æ–ø–∫–æ–π –ø–æ–≤—Ç–æ—Ä–∞. –£—Å—Ç—Ä–∞–Ω—è–µ—Ç Unhandled Exception –≤ logcat –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –≥–æ—Ä–æ–¥–∞ —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/messages.md](changes/messages.md).
- **–ú—É–ª—å—Ç–∏‚Äë–≥–æ—Ä–æ–¥ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã (backend + mobile):** –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å –≥–æ—Ä–æ–¥–∞ —Å —Ü–µ–Ω—Ç—Ä–æ–º –∏ –≥—Ä–∞–Ω–∏—Ü–∞–º–∏ (`center`, `bounds`) –∏ in-memory –∫–æ–Ω—Ñ–∏–≥ –≥–æ—Ä–æ–¥–æ–≤ (–°–ü–±) –≤ backend (–º–æ–¥—É–ª—å cities), —Ä–∞—Å—à–∏—Ä–µ–Ω—ã —Å—É—â–Ω–æ—Å—Ç–∏/DTO —Å–æ–±—ã—Ç–∏–π, –∫–ª—É–±–æ–≤ –∏ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π –ø–æ–ª–µ–º `cityId`, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `003_events_city_id` –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ `cityId`/`clubId` –≤ `/api/events`, `/api/map/data`, `/api/clubs`, `/api/territories`. –ù–∞ –º–æ–±–∏–ª—å–Ω–æ–º –∫–ª–∏–µ–Ω—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω `CurrentCityService` (–∫–µ—à + –ø—Ä–æ—Ñ–∏–ª—å), –¥–∏–∞–ª–æ–≥ –≤—ã–±–æ—Ä–∞ –≥–æ—Ä–æ–¥–∞, –ø–µ—Ä–µ–¥–∞—á–∞ `cityId` –≤–æ –≤—Å–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ API-–∑–∞–ø—Ä–æ—Å—ã –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è –∫–∞—Ä—Ç—ã Yandex MapKit –ø–æ–¥ –≤—ã–±—Ä–∞–Ω–Ω—ã–π –≥–æ—Ä–æ–¥ (—Ü–µ–Ω—Ç—Ä, zoom, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –æ–±–ª–∞—Å—Ç–∏). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/cities.md](changes/cities.md), [changes/events.md](changes/events.md), [changes/clubs.md](changes/clubs.md), [changes/territories.md](changes/territories.md), [changes/maps.md](changes/maps.md).

### 2025-01-27
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ / –ø—Ä–æ—Ñ–∏–ª—å:** –∫–æ–Ω—Ç—Ä–∞–∫—Ç `club === null`, mock-—Ñ–ª–∞–≥ –¥–ª—è –∑–∞–≥–ª—É—à–µ–∫, –ø—Ä–∞–≤–∏–ª–∞ –º–µ—Ä–∫–∞—Ç–µ–ª—è, ProfileScreen –∫–∞–∫ —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/users.md](changes/users.md).
- **–°–æ–±—ã—Ç–∏—è (Events) MVP:** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –æ—Å–Ω–æ–≤–∞ –º–æ–¥—É–ª—è Events (backend + mobile), —Ç–∏–ø—ã, DTO, API —Ä–æ—É—Ç–µ—Ä—ã, UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã —Å—Ç–∞—Ç—É—Å–æ–≤. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/events.md](changes/events.md).
- **Messages MVP —Ç–∞–±—ã –ø–æ 123.md:** —Ç–∞–±—ã ¬´–ì–æ—Ä–æ–¥ | –ö–ª—É–±—ã | –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è¬ª, —É–±—Ä–∞–Ω—ã –ª–∏—á–Ω—ã–µ –ø–µ—Ä–µ–ø–∏—Å–∫–∏, –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –æ–±–Ω–æ–≤–ª—ë–Ω empty state –≥–æ—Ä–æ–¥—Å–∫–æ–≥–æ —á–∞—Ç–∞. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/messages.md](changes/messages.md).
- **Run Tab MVP:** —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è MVP –≤–∫–ª–∞–¥–∫–∏ Run —Å–æ–≥–ª–∞—Å–Ω–æ 123.md ‚Äî GPS-—Ç—Ä–µ–∫–∏–Ω–≥, —Ç–∞–π–º–µ—Ä, —Ç—Ä–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è (idle/recording/result), backend –º–æ–¥—É–ª—å runs, API –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –ø—Ä–æ–±–µ–∂–µ–∫. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md).
- **Maps MVP:** –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –æ—Å–Ω–æ–≤–∞ –∫–∞—Ä—Ç—ã —Å–æ–≥–ª–∞—Å–Ω–æ 123.md ‚Äî API endpoint –¥–ª—è –¥–∞–Ω–Ω—ã—Ö –∫–∞—Ä—Ç—ã, –º–æ–¥–µ–ª–∏, —Å–µ—Ä–≤–∏—Å—ã, UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (—Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–∏, —Å–æ–±—ã—Ç–∏—è, —Ñ–∏–ª—å—Ç—Ä—ã, –∫–Ω–æ–ø–∫–∞ "–ú–æ—ë –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ"). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/maps.md](changes/maps.md).
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (Sentry):** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Sentry –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫ –≤ mobile (Flutter) –∏ backend (Node.js). –ü–µ—Ä–µ—Ö–≤–∞—Ç –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∏—Å–∫–ª—é—á–µ–Ω–∏–π, —è–≤–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—à–∏–±–æ–∫ –∏–∑ –∫–ª—é—á–µ–≤—ã—Ö –º–µ—Å—Ç. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/logging.md](changes/logging.md), [adr/0001-sentry-error-logging.md](adr/0001-sentry-error-logging.md).
- **–ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firebase Authentication –¥–ª—è Android:** –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Firebase Authentication –≤ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase –ø—Ä–æ–µ–∫—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ Gradle, –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–¥–µ. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/firebase-setup.md](changes/firebase-setup.md), [docs/firebase-setup.md](firebase-setup.md).

### 2026-01-31
- **Smoke-—Ç–µ—Å—Ç—ã (backend + mobile):** –¥–æ–±–∞–≤–ª–µ–Ω—ã –±–∞–∑–æ–≤—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –ø—É—Ç–µ–π. Backend: Jest + supertest, 18 —Ç–µ—Å—Ç–æ–≤ (health endpoint, auth middleware, –≤—Å–µ GET /api/*, POST validation). Mobile: flutter_test, 13 —Ç–µ—Å—Ç–æ–≤ (–º–æ–¥–µ–ª–∏ EventListItemModel, ClubModel, RunModel ‚Äî fromJson/toJson, null handling). –ö–æ–º–∞–Ω–¥—ã: `npm test` (backend), `flutter test` (mobile).
- **–ö–Ω–æ–ø–∫–∞ –ø–æ–≤—Ç–æ—Ä–∞ –Ω–∞ –≤—Å–µ—Ö —ç–∫—Ä–∞–Ω–∞—Ö –æ—à–∏–±–æ–∫:** –¥–æ–±–∞–≤–ª–µ–Ω `onRetry` callback –≤ `ErrorDisplay`, –≤—Å–µ detail screens –∏ —Ç–∞–±—ã —Å–æ–æ–±—â–µ–Ω–∏–π –ø–æ–ª—É—á–∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –æ—à–∏–±–∫–µ.
- **–ú–∏–≥—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç: Mapbox ‚Üí Yandex MapKit:** —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫ –∫–∞—Ä—Ç –∏–∑–º–µ–Ω—ë–Ω —Å Mapbox –Ω–∞ Yandex MapKit; –ø—Ä–∏—á–∏–Ω–∞ ‚Äî –ª—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–≥–∏–æ–Ω–∞ –†–§ –∏ —Ü–µ–Ω–æ–≤–∞—è –ø–æ–ª–∏—Ç–∏–∫–∞. –û–±–Ω–æ–≤–ª–µ–Ω—ã: pubspec.yaml (yandex_mapkit: ^4.0.0), AndroidManifest.xml (API –∫–ª—é—á –Ø–Ω–¥–µ–∫—Å), map_screen.dart (–ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω –ø–æ–¥ Yandex API), —É–¥–∞–ª—ë–Ω my_location_button.dart (—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤—Å—Ç—Ä–æ–µ–Ω –≤ map_screen), –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/maps-yandex.md](changes/maps-yandex.md).
- **Mobile API base URL ‚Äî –æ–±–ª–∞—á–Ω—ã–π backend –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (debug):** –≤ `api_config.dart` –¥–ª—è debug-—Å–±–æ—Ä–æ–∫ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ `--dart-define=API_BASE_URL` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –æ–±–ª–∞—á–Ω—ã–π backend `http://85.208.85.13:3000` (Cloud.ru); –¥–ª—è release/production –ø–æ–≤–µ–¥–µ–Ω–∏–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π (https). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/api-client.md](changes/api-client.md).

### 2026-01-27
- **Backend dev compile fix (Sentry types):** –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ TypeScript-—Ç–∏–ø–∏–∑–∞—Ü–∏–∏ –¥–ª—è `@sentry/node` –≤ backend, —á—Ç–æ–±—ã —É—Å—Ç—Ä–∞–Ω–∏—Ç—å –æ—à–∏–±–∫—É TS2307 –ø—Ä–∏ –ª–æ–∫–∞–ª—å–Ω–æ–º –∑–∞–ø—É—Å–∫–µ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ä–∞–Ω—Ç–∞–π–º-–ø–æ–≤–µ–¥–µ–Ω–∏—è. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è Sentry –æ—Å—Ç–∞–ª–æ—Å—å –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π.
 - **Mobile debug build –ø—Ä–æ–≤–µ—Ä–µ–Ω:** –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Å–±–æ—Ä–∫–∞ `flutter build apk --debug` –¥–ª—è –º–æ–±–∏–ª—å–Ω–æ–≥–æ –∫–ª–∏–µ–Ω—Ç–∞, –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–æ–∫ –Ω–µ—Ç, APK —É—Å–ø–µ—à–Ω–æ —Å–æ–±—Ä–∞–Ω; –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø–æ –≤–µ—Ä—Å–∏–∏ Android Gradle Plugin –∑–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –∫–∞–∫ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –¥–æ–ª–≥ –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–∞ —Ç–µ–∫—É—â–µ–º skeleton-—ç—Ç–∞–ø–µ.

### 2026-01-29
- **Backend Firebase auth stub safety:** –∑–∞–≥–ª—É—à–∫–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ Firebase ID —Ç–æ–∫–µ–Ω–æ–≤ –≤ backend –ø–æ–º–µ—á–µ–Ω–∞ –∫–∞–∫ SECURITY STUB, –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ `NODE_ENV` –≤ `verifyToken`, –∞ —Ç–∞–∫–∂–µ startup-check `assertFirebaseAuthConfigured()` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–µ—Ä–≤–µ—Ä–∞; –≤ production –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞–≥–ª—É—à–∫–∏ —Ç–µ–ø–µ—Ä—å –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–π –æ—à–∏–±–∫–µ, —á—Ç–æ–±—ã –∏—Å–∫–ª—é—á–∏—Ç—å —Å–ª—É—á–∞–π–Ω—ã–π –¥–µ–ø–ª–æ–π –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Firebase Admin SDK.
 - **Backend API auth middleware:** –¥–æ–±–∞–≤–ª–µ–Ω–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–µ middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è –≤—Å–µ—Ö `/api` —Ä–æ—É—Ç–æ–≤, –∫–æ—Ç–æ—Ä–æ–µ –æ–∂–∏–¥–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>` –∏ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫—É –≤ `AuthService.verifyToken()` (FirebaseAuthService stub); –≤ —Å–ª—É—á–∞–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –∏–ª–∏ –Ω–µ–≤–∞–ª–∏–¥–Ω–æ–≥–æ —Ç–æ–∫–µ–Ω–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `401 Unauthorized`. –ü–æ–≤–µ–¥–µ–Ω–∏–µ –¥–æ–º–µ–Ω–Ω—ã—Ö –∑–∞–≥–ª—É—à–µ–∫ –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–æ, –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∫–∞—Å–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –¥–æ—Å—Ç—É–ø–∞.
 - **Backend runtime-–≤–∞–ª–∏–¥–∞—Ü–∏—è POST DTO:** –ø–æ–¥–∫–ª—é—á–µ–Ω–∞ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è runtime-–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è POST-—ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ `activities`, `cities`, `clubs`, `events`, `runs`, `territories`, `users` —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Zod-—Å—Ö–µ–º –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö `Create*Dto`. –î–æ–±–∞–≤–ª–µ–Ω–æ –æ–±—â–µ–µ middleware `validateBody(schema)`; –ø—Ä–∏ –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–∏ —Ñ–æ—Ä–º—ã/—Ç–∏–ø–æ–≤ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `400 Bad Request`, –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –¥–æ–º–µ–Ω–Ω—ã–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –ø–æ-–ø—Ä–µ–∂–Ω–µ–º—É –æ—Å—Ç–∞—é—Ç—Å—è –∑–∞–≥–ª—É—à–∫–∞–º–∏.
 - **API –æ—à–∏–±–∫–∏ –∏ –ø–æ–ª–∏—Ç–∏–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏:** –≤–≤–µ–¥—ë–Ω –µ–¥–∏–Ω—ã–π –∫–æ–Ω–≤–µ—Ä—Ç –æ—à–∏–±–æ–∫ API `{ code; message; details? }`, —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω —Ñ–æ—Ä–º–∞—Ç –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (`code: \"validation_error\"`, `details.fields[{ field; message; code }]`) –¥–ª—è Zod, –∞ —Ç–∞–∫–∂–µ —Ñ–æ—Ä–º–∞ –æ—Ç–≤–µ—Ç–æ–≤ `401 Unauthorized` –≤ `authMiddleware`; –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ –æ—à–∏–±–æ–∫ –æ—Å—Ç–∞—ë—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–æ–≤. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [adr/0002-api-error-format-and-validation.md](adr/0002-api-error-format-and-validation.md), [docs/api-errors-and-validation.md](api-errors-and-validation.md).
 - **Mobile FutureBuilder state fix:** —ç–∫—Ä–∞–Ω—ã –¥–µ—Ç–∞–ª–µ–π (`ActivityDetailsScreen`, `CityDetailsScreen`, `ClubDetailsScreen`, `TerritoryDetailsScreen`, `EventDetailsScreen`) –∏ –≤–∫–ª–∞–¥–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π (`GlobalChatTab`, `ClubMessagesTab`, `NotificationsTab`) –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ `StatefulWidget` —Å –∫—ç—à–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ `Future` –≤ `initState`, —á—Ç–æ–±—ã –∏–∑–±–µ–∂–∞—Ç—å –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è HTTP-–∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –∑–∞–≥–ª—É—à–µ–∫ –ø—Ä–∏ –∫–∞–∂–¥–æ–º `rebuild`; –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –∏ –¥–æ–º–µ–Ω–Ω—ã–µ –∏–Ω–≤–∞—Ä–∏–∞–Ω—Ç—ã –Ω–µ –∏–∑–º–µ–Ω–µ–Ω—ã.
 - **Mobile Maps territory radius fix:** —Ä–∞–¥–∏—É—Å placeholder-—Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π –Ω–∞ –∫–∞—Ä—Ç–µ –ø–µ—Ä–µ—Å—á–∏—Ç–∞–Ω –∏–∑ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–∏–∫—Å–µ–ª–µ–π –≤ —ç–∫—Ä–∞–Ω–Ω–æ-–∑–∞–≤–∏—Å–∏–º—ã–π —Ä–∞–∑–º–µ—Ä –Ω–∞ –æ—Å–Ω–æ–≤–µ zoom/—à–∏—Ä–æ—Ç—ã, —á—Ç–æ–±—ã –ø—Ä–∏–±–ª–∏–∑–∏—Ç–µ–ª—å–Ω–æ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å 500 –º –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö –º–µ—Ç—Ä–∞—Ö –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø—Ä–∏ –∑—É–º–µ; –¥–æ–º–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏–π –Ω–µ –∏–∑–º–µ–Ω–µ–Ω–∞, –ø—Ä–∞–≤–∫–∞ –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –≤ `MapScreen`.
 - **Mobile Run duration format fix:** –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø—Ä–æ–±–µ–∂–∫–∏ –≤ `RunScreen`, –∏–∑-–∑–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –ø—Ä–æ–±–µ–∂–∫–∏ –¥–æ–ª—å—à–µ 60 –º–∏–Ω—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞–ª–∏—Å—å –±–µ–∑ —á–∞—Å–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 1:30:00 –∫–∞–∫ `30:00`); —Ç–µ–ø–µ—Ä—å –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —á–∞—Å–æ–≤ –≤—Ä–µ–º—è –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `H:MM:SS`, –∏–Ω–∞—á–µ `MM:SS`.
 - **Mobile Territories coordinates model dedup:** –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∫–ª–∞—Å—Å `TerritoryCoordinates` –æ–±—ä–µ–¥–∏–Ω—ë–Ω –≤ –æ–¥–Ω—É DTO-–º–æ–¥–µ–ª—å –≤ `territory_model.dart`, `territory_map_model.dart` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–º–ø–æ—Ä—Ç –≤–º–µ—Å—Ç–æ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–π –∫–æ–ø–∏–∏; —ç—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç –∏–º–µ–Ω –ø—Ä–∏ —Å–æ–≤–º–µ—Å—Ç–Ω–æ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –æ–±–µ–∏—Ö –º–æ–¥–µ–ª–µ–π –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –¥–æ–º–µ–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏.
 - **Logging refactor (local + dev remote logs):** Sentry –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤–æ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω–∞; –Ω–∞ backend –¥–æ–±–∞–≤–ª–µ–Ω –ø—Ä–æ—Å—Ç–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ª–æ–≥–≥–µ—Ä –∏ dev-only —ç–Ω–¥–ø–æ–∏–Ω—Ç `POST /dev/log` –¥–ª—è –ø—Ä–∏—ë–º–∞ —É–¥–∞–ª—ë–Ω–Ω—ã—Ö –ª–æ–≥–æ–≤ –æ—Ç –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤ Flutter-–∫–ª–∏–µ–Ω—Ç–µ `sentry_flutter` –∑–∞–º–µ–Ω—ë–Ω –Ω–∞ –ª—ë–≥–∫–∏–π `DevRemoteLogger`, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –Ω–∞ –ª–æ–∫–∞–ª—å–Ω—ã–π backend. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/logging.md](changes/logging.md), [adr/0003-local-logging-and-dev-remote-logs.md](adr/0003-local-logging-and-dev-remote-logs.md).
 - **Dev-–ª–æ–≥–∏ –Ω–∞ –µ–¥–∏–Ω—ã–π —É–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä:** –ª–æ–≥–∏ –≤ dev –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ –≤–Ω–µ—à–Ω–∏–π –ª–æ–≥-—Å–µ—Ä–≤–µ—Ä (POST /log, http://176.108.255.4:4000); –≤ PROD –æ—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∞. Backend: –º–æ–¥—É–ª—å `devLogClient`, –ø—Ä–∏ error/warn ‚Äî fire-and-forget POST –Ω–∞ —Å–µ—Ä–≤–µ—Ä; —ç–Ω–¥–ø–æ–∏–Ω—Ç `/dev/log` —É–¥–∞–ª—ë–Ω. Mobile: `DevRemoteLogger` –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∑–∞–¥–∞–Ω–Ω–æ–º `DEV_LOG_SERVER` (–≤ prod –Ω–µ –∑–∞–¥–∞—ë—Ç—Å—è); –ø—É—Ç—å `/log`. Admin: –¥–æ–±–∞–≤–ª–µ–Ω–∞ —É—Ç–∏–ª–∏—Ç–∞ `sendDevLog` –¥–ª—è –±—É–¥—É—â–∏—Ö –æ—à–∏–±–æ–∫ API. –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –ø—Ä–∏—ë–º–∞ –ª–æ–≥–æ–≤ ‚Äî —É–¥–∞–ª—ë–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä; —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/logging.md](changes/logging.md).
 - **Mobile Events RefreshIndicator fix:** –≤ `EventsScreen` –º–µ—Ç–æ–¥ `_refreshEvents()` –ø–µ—Ä–µ–≤–µ–¥—ë–Ω –Ω–∞ –≤–æ–∑–≤—Ä–∞—Ç `Future<void>` —Å –æ–∂–∏–¥–∞–Ω–∏–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è `_fetchEvents()`; `RefreshIndicator.onRefresh` –ø–µ—Ä–µ–¥–∞—ë—Ç—Å—è –Ω–∞–ø—Ä—è–º—É—é `_refreshEvents`, —á—Ç–æ–±—ã —Å–ø–∏–Ω–Ω–µ—Ä pull-to-refresh –Ω–µ –∏—Å—á–µ–∑–∞–ª –¥–æ –æ–∫–æ–Ω—á–∞–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/events.md](changes/events.md).
- **Mobile RunService baseUrl fix:** –≤ `RunService` fallback –¥–ª—è `ApiClient` –∑–∞–º–µ–Ω—ë–Ω —Å —Ö–∞—Ä–¥–∫–æ–¥–∞ `http://localhost:3000` –Ω–∞ `ApiConfig.getBaseUrl()`, —á—Ç–æ–±—ã submit –ø—Ä–æ–±–µ–∂–∫–∏ —Ä–∞–±–æ—Ç–∞–ª –Ω–∞ Android-—ç–º—É–ª—è—Ç–æ—Ä–µ (10.0.2.2). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md).
- **firebaseUid —É—Ç–µ–∫–∞–µ—Ç –≤ API-–æ—Ç–≤–µ—Ç–∞—Ö (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å):** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `GET /api/users`, `GET /api/users/:id`, `POST /api/users` –±–æ–ª—å—à–µ –Ω–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç —Å—É—â–Ω–æ—Å—Ç—å User —Å –ø–æ–ª–µ–º firebaseUid; –≤–≤–µ–¥—ë–Ω –º–∞–ø–ø–∏–Ω–≥ User ‚Üí UserViewDto (–±–µ–∑ firebaseUid) –∏ —Ñ—É–Ω–∫—Ü–∏—è `userToViewDto`. –≠–Ω–¥–ø–æ–∏–Ω—Ç `GET /api/users/me/profile` —É–∂–µ –Ω–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–ª firebaseUid (ProfileDto.user ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/users.md](changes/users.md).
 - **–ï–¥–∏–Ω—ã–π DB pool (—É—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è):** —É–¥–∞–ª—ë–Ω –º–æ–¥—É–ª—å `shared/db`; –æ—Å—Ç–∞–≤–ª–µ–Ω –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –ø—É–ª–∞ PostgreSQL ‚Äî `db/client.ts`. –£—Å—Ç—Ä–∞–Ω–µ–Ω—ã –¥–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –ø—É–ª–∞ —Å –∫–æ–ª–ª–∏–∑–∏–µ–π `getDbPool()` –∏ —É–¥–≤–æ–µ–Ω–∏–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –æ–±–æ–∏—Ö. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/database.md](changes/database.md).
 - **Backend graceful shutdown (DB pool):** –≤ `server.ts` –¥–æ–±–∞–≤–ª–µ–Ω —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∏–≥–Ω–∞–ª–æ–≤ `SIGTERM`/`SIGINT`, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–∏ –ø—Ä–æ—Ü–µ—Å—Å–∞ –≤—ã–∑—ã–≤–∞–µ—Ç `closeDbPool()` –∏–∑ `db/client.ts` –∏ –ª–æ–≥–∏—Ä—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç —á–µ—Ä–µ–∑ `logger`; —Ü–µ–ª—å ‚Äî –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∑–∞–∫—Ä—ã–≤–∞—Ç—å –ø—É–ª PostgreSQL –∏ –Ω–µ –æ—Å—Ç–∞–≤–ª—è—Ç—å –≤–∏—Å—è—â–∏–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –ø—Ä–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–µ backend-—Å–µ—Ä–≤–µ—Ä–∞. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/database.md](changes/database.md).
 - **DB_PASSWORD –≤ production (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å):** –≤ production –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –∑–∞–ø—É—Å–∫ backend –±–µ–∑ –∑–∞–¥–∞–Ω–Ω–æ–≥–æ `DB_PASSWORD` –ø—Ä–∏–≤–æ–¥–∏—Ç –∫ –≤—ã–±—Ä–æ—Å—É –æ—à–∏–±–∫–∏ –≤ `getDbConfig()` (config/db.ts); –¥–µ—Ñ–æ–ª—Ç –ø—É—Å—Ç–æ–π —Å—Ç—Ä–æ–∫–∏ —Å–æ—Ö—Ä–∞–Ω—ë–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è –Ω–µ-production. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/database.md](changes/database.md).
- **Invalid Date –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ run (–±–∞–≥):** –≤ `CreateRunSchema` –ø–æ–ª—è `startedAt` –∏ `endedAt` –∑–∞–º–µ–Ω–µ–Ω—ã —Å `z.string()` –Ω–∞ `z.string().datetime()`, —á—Ç–æ–±—ã –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ ISO-—Å—Ç—Ä–æ–∫–∏ –æ—Ç–∫–ª–æ–Ω—è–ª–∏—Å—å –¥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞; –ø—Ä–∏ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ –¥–∞—Ç—ã backend –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `400` —Å validation_error –≤–º–µ—Å—Ç–æ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ Invalid Date –≤ null. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md).
- **Mobile API auth (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å):** –≤ `ApiClient` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ `authToken` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Authorization: Bearer <token>` –≤–æ –≤—Å–µ GET –∏ POST –∑–∞–ø—Ä–æ—Å—ã; –º–µ—Ö–∞–Ω–∏–∑–º –∏–Ω—ä–µ–∫—Ü–∏–∏ —Ç–æ–∫–µ–Ω–∞ –≥–æ—Ç–æ–≤, –ø–µ—Ä–µ–¥–∞—á–∞ —Ç–æ–∫–µ–Ω–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª–∏–µ–Ω—Ç–∞ ‚Äî –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ –∫–æ–¥–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä Firebase ID token). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/api-client.md](changes/api-client.md).
- **Mobile API base URL ‚Äî HTTPS –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å):** –≤ `api_config.dart` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ö–µ–º–∞ https –¥–ª—è base URL; –¥–ª—è dev/emulator –º–æ–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å http —á–µ—Ä–µ–∑ `--dart-define=API_BASE_URL=http://10.0.2.2:3000` (–∏–ª–∏ http://localhost:3000). –í production –Ω–µ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å API_BASE_URL ‚Äî —Ç–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è https —Å –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–º —Ö–æ—Å—Ç–æ–º. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/api-client.md](changes/api-client.md).
- **Mobile ApiClient ‚Äî —Å–∏–Ω–≥–ª—Ç–æ–Ω –∏ dispose (—É—Ç–µ—á–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤):** `ApiClient` —Å–æ–∑–¥–∞–≤–∞–ª –Ω–æ–≤—ã–π `http.Client()` –Ω–∞ –∫–∞–∂–¥—ã–π —ç–∫—Ä–∞–Ω –±–µ–∑ –≤—ã–∑–æ–≤–∞ `close()`, —Å–æ–∫–µ—Ç—ã –Ω–µ –∑–∞–∫—Ä—ã–≤–∞–ª–∏—Å—å. –í–≤–µ–¥—ë–Ω —Å–∏–Ω–≥–ª—Ç–æ–Ω —á–µ—Ä–µ–∑ `ApiClient.getInstance(baseUrl:, authToken?)` ‚Äî –æ–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –æ–¥–∏–Ω `http.Client`. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `dispose()` –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è –∫–ª–∏–µ–Ω—Ç–∞ –∏ —Å–±—Ä–æ—Å–∞ —Å–∏–Ω–≥–ª—Ç–æ–Ω–∞ (—Ç–µ—Å—Ç—ã, —è–≤–Ω—ã–π logout). –í—Å–µ —ç–∫—Ä–∞–Ω—ã –∏ —Å–µ—Ä–≤–∏—Å—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ `getInstance()`. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/api-client.md](changes/api-client.md).
- **Mobile ServiceLocator (DI):** –≤–Ω–µ–¥—Ä—ë–Ω –ø—Ä–æ—Å—Ç–æ–π ServiceLocator: ApiClient –∏ –≤—Å–µ API-—Å–µ—Ä–≤–∏—Å—ã —Å–æ–∑–¥–∞—é—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –≤ `ServiceLocator.init()` –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (–≤ `main.dart`). –≠–∫—Ä–∞–Ω—ã –∏ –≤–∫–ª–∞–¥–∫–∏ –ø–æ–ª—É—á–∞—é—Ç —Å–µ—Ä–≤–∏—Å—ã —á–µ—Ä–µ–∑ `ServiceLocator.eventsService`, `ServiceLocator.mapService` –∏ —Ç.–¥.; –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Ü–µ–ø–æ—á–∫–∏ getBaseUrl ‚Üí getInstance ‚Üí new XxxService —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/api-client.md](changes/api-client.md), [adr/0004-mobile-service-locator-di.md](adr/0004-mobile-service-locator-di.md).
- **Mobile LocationService dispose (—É—Ç–µ—á–∫–∞ –ø–∞–º—è—Ç–∏):** –≤ `RunService` –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –±–µ–∑ –∏–Ω–∂–µ–∫—Ü–∏–∏ `LocationService` —Å–æ–∑–¥–∞–≤–∞–ª—Å—è –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä —Å `StreamController`, –∫–æ—Ç–æ—Ä—ã–π –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –æ—Å–≤–æ–±–æ–∂–¥–∞–ª—Å—è. –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ –≤–ª–∞–¥–µ–Ω–∏—è `_ownLocationService`; –≤ `cancelRun()` –ø—Ä–∏ –≤–ª–∞–¥–µ–Ω–∏–∏ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `_locationService.dispose()` –∏ —Å–æ–∑–¥–∞—ë—Ç—Å—è –Ω–æ–≤—ã–π —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ `startRun()`. –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `dispose()` –¥–ª—è –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ —É–Ω–∏—á—Ç–æ–∂–µ–Ω–∏–∏ RunService (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤ —Ç–µ—Å—Ç–∞—Ö). –í `ProfileScreen` LocationService –Ω–µ —Å–æ–∑–¥–∞—ë—Ç—Å—è ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å–∏–Ω–≥–ª—Ç–æ–Ω –∏–∑ ServiceLocator, –≤—ã–∑–æ–≤ dispose —Ç–∞–º –Ω–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md).
- **Mobile RunModel (DTO) vs RunSession (UI state):** RunSession ‚Äî –º–æ–¥–µ–ª—å —Å–æ—Å—Ç–æ—è–Ω–∏—è —Ç—Ä–µ–∫–µ—Ä–∞ (idle/recording/result), –±–µ–∑ fromJson/toJson, –±–µ–∑ userId/endedAt/createdAt; duration ‚Äî Duration, —Å—Ç–∞—Ç—É—Å ‚Äî RunSessionStatus (running, completed). –°–æ–∑–¥–∞–Ω–∞ –æ—Ç–¥–µ–ª—å–Ω–∞—è DTO `RunModel` –¥–ª—è –¥–µ—Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏–∏ backend RunViewDto: id, userId, activityId?, startedAt, endedAt, duration (—Å–µ–∫—É–Ω–¥—ã ‚Üí Duration), distance, status (RunModelStatus: completed, invalid), createdAt, updatedAt. RunService.submitRun –ø–∞—Ä—Å–∏—Ç –æ—Ç–≤–µ—Ç 201 —á–µ—Ä–µ–∑ RunModel.fromJson –¥–ª—è —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç–∏ —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–º backend. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/runs.md](changes/runs.md).
- **Mobile API error handling (activities, cities, clubs, territories):** –≤ —Å–µ—Ä–≤–∏—Å–∞—Ö `ActivitiesService`, `CitiesService`, `ClubsService`, `TerritoriesService` –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `response.statusCode` –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ-JSON –æ—Ç–≤–µ—Ç–æ–≤ –ø–æ –æ–±—Ä–∞–∑—Ü—É `EventsService.getEvents()`: –ø—Ä–∏ —Å—Ç–∞—Ç—É—Å–µ != 200 –≤—ã–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è `Exception`, –ø—Ä–∏ –æ—Ç–≤–µ—Ç–µ –Ω–µ application/json –∏–ª–∏ HTML ‚Äî `FormatException` —Å –ø–æ–Ω—è—Ç–Ω—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º; –ø–∞—Ä—Å–∏–Ω–≥ JSON –æ–±—ë—Ä–Ω—É—Ç –≤ try/catch. –≠—Ç–æ —É—Å—Ç—Ä–∞–Ω—è–µ—Ç FormatException –ø—Ä–∏ 404/500 –∏ –æ—Ç–≤–µ—Ç–∞—Ö —Å HTML. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/activities.md](changes/activities.md), [changes/cities.md](changes/cities.md), [changes/clubs.md](changes/clubs.md), [changes/territories.md](changes/territories.md).
- **Backend: –µ–¥–∏–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –ë–î:** –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î –±–æ–ª—å—à–µ –Ω–µ –¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è –≤ env.ts; –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫ ‚Äî `config/db.ts`. EnvConfig —Å–æ–¥–µ—Ä–∂–∏—Ç —Ç–æ–ª—å–∫–æ `port`; –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ parseInt –Ω–∞ NaN –¥–ª—è PORT –∏ DB_PORT; –∑–∞–≥—Ä—É–∑–∫–∞ .env –≤—ã–Ω–µ—Å–µ–Ω–∞ –≤ —è–≤–Ω—ã–π `loadEnv()` –≤ server.ts. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/database.md](changes/database.md).
- **Backend: –µ–¥–∏–Ω–∞—è auth-–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è:** —É–¥–∞–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è auth/service (AuthService, FirebaseAuthService); middleware –∏ –∫–æ–¥ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç–æ–ª—å–∫–æ `modules/auth` (AuthProvider, FirebaseAuthProvider, getAuthProvider()). –£–¥–∞–ª—ë–Ω auth/service.ts; auth/types —Ä–µ—ç–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç —Ç–∏–ø—ã –∏–∑ modules/auth. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/auth.md](changes/auth.md).
- **Backend: –æ–±—â–∏–π —Ç–∏–ø –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç (latitude, longitude):** –≤–≤–µ–¥—ë–Ω shared —Ç–∏–ø `GeoCoordinates` –≤ `shared/types/coordinates.ts`; city, territory, event, run, map –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–≥–æ (CityCoordinates, TerritoryCoordinates, EventStartLocation, GpsPoint extends GeoCoordinates, MapCoordinates ‚Äî –∞–ª–∏–∞—Å—ã). –£—Å—Ç—Ä–∞–Ω–µ–Ω–æ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ 5 –º–æ–¥—É–ª—è—Ö. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/backend-coordinates.md](changes/backend-coordinates.md).
- **Backend: CORS, rate limiting, express.json limit:** –¥–æ–±–∞–≤–ª–µ–Ω—ã CORS middleware, rate limit 100 req/min per IP –¥–ª—è /api (product_spec 18.1), —è–≤–Ω—ã–π limit –¥–ª—è express.json (1mb). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/backend-security.md](changes/backend-security.md).
- **Backend: env ‚Äî loadEnv –∏ parseInt NaN:** –≤ env.ts –¥–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `loadEnv()` –¥–ª—è —è–≤–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ .env (–≤—ã–∑–æ–≤ –∏–∑ server.ts); –ø–∞—Ä—Å–∏–Ω–≥ PORT –∏ DB_PORT —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ NaN –∏ –¥–æ–ø—É—Å—Ç–∏–º—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/database.md](changes/database.md).
- **Mobile: GoRouter refreshListenable:** —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π GoRouter –¥–æ–ø–æ–ª–Ω–µ–Ω `refreshListenable: authRefreshNotifier`; –ø—Ä–∏ –≤—ã–∑–æ–≤–µ `authRefreshNotifier.refresh()` –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è (–∑–∞–¥–µ–ª –ø–æ–¥ —Ä–µ–∞–∫—Ü–∏—é –Ω–∞ —Å–º–µ–Ω—É auth). –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/mobile-app.md](changes/mobile-app.md).
- **Mobile: EventsScreen ‚Äî —Ñ–∏–ª—å—Ç—Ä—ã –ø–µ—Ä–µ–∑–∞–ø—Ä–∞—à–∏–≤–∞—é—Ç –¥–∞–Ω–Ω—ã–µ:** –ø—Ä–∏ —Å–º–µ–Ω–µ —Ñ–∏–ª—å—Ç—Ä–∞ –ø–æ –¥–∞—Ç–µ –∏–ª–∏ ¬´–¢–æ–ª—å–∫–æ –æ—Ç–∫—Ä—ã—Ç—ã–µ¬ª –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è `_eventsFuture = _fetchEvents()` –∏ —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/events.md](changes/events.md).
- **Mobile: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ä–µ–¥–Ω–∏—Ö –ø—Ä–æ–±–ª–µ–º (36-50):** –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (context.go ‚Üí context.push –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è back stack), –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω O(n¬≤) –ø–µ—Ä–µ—Å—á—ë—Ç –¥–∏—Å—Ç–∞–Ω—Ü–∏–∏ –≤ RunScreen, —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã _onMapCreated –∏ _loadMapData –≤ MapScreen, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ GPS permissions, —É–±—Ä–∞–Ω—ã —Ö–∞—Ä–¥–∫–æ–¥—ã, –≤—ã–Ω–µ—Å–µ–Ω–∞ –æ–±—â–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ ErrorDisplay –≤–∏–¥–∂–µ—Ç, –¥–æ–±–∞–≤–ª–µ–Ω –ø–∞—Ä—Å–∏–Ω–≥ clubId –≤ TerritoryModel, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã unsafe as int casts –≤–æ –≤—Å–µ—Ö –º–æ–¥–µ–ª—è—Ö, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω api_config.dart –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å Flutter Web. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/mobile-fixes.md](changes/mobile-fixes.md).
- **Backend: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∏–∑–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º (L-1‚ÄìL-10):** –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–¥–∞: –ø—Ä–µ—Ñ–∏–∫—Å _ –¥–ª—è –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ error handler, –∞–¥—Ä–µ—Å –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–Ω–∏—è —Å–µ—Ä–≤–µ—Ä–∞ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–∫—Ä—É–∂–µ–Ω–∏—è (0.0.0.0 —Ç–æ–ª—å–∫–æ –≤ dev), –¥–æ–±–∞–≤–ª–µ–Ω–æ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤ –¥–ª—è req.query –≤ events/map routes, —Ä–æ—É—Ç–µ—Ä—ã –ø–µ—Ä–µ–≤–µ–¥–µ–Ω—ã –Ω–∞ barrel exports –º–æ–¥—É–ª–µ–π, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Notification –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω –≤ UserNotification –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∫–æ–Ω—Ñ–ª–∏–∫—Ç–∞ —Å Web API, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è re-export –≤ auth barrel, –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–æ –ø–æ–ª–µ isMercantile ‚Üí isMercenary –≤–æ –≤—Å–µ—Ö —Ñ–∞–π–ª–∞—Ö. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/backend-low-issues.md](changes/backend-low-issues.md).
- **Mobile: –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∏–∑–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º (L-11‚ÄìL-27):** –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –∫–æ–¥–∞: —É–±—Ä–∞–Ω—ã –±–µ—Å–ø–æ–ª–µ–∑–Ω—ã–µ try/catch —Å rethrow –≤ ApiClient, –∑–∞–º–µ–Ω–µ–Ω—ã deprecated withOpacity() –Ω–∞ Color.fromRGBO, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∏–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—å RunSession.gpsPoints, –¥–æ–±–∞–≤–ª–µ–Ω—ã TODO –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è i18n/Equatable/retry, –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã —Ñ–∏–ª—å—Ç—Ä—ã —Å–æ–±—ã—Ç–∏–π (–æ—Ç–ø—Ä–∞–≤–∫–∞ query –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤), –∑–∞–º–µ–Ω–µ–Ω–æ —Ä—É—á–Ω–æ–µ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞—Ç –Ω–∞ DateFormat, –≤—ã–Ω–µ—Å–µ–Ω –æ–±—â–∏–π –≤–∏–¥–∂–µ—Ç NotificationItem –¥–ª—è —É—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è, –¥–æ–±–∞–≤–ª–µ–Ω copyWith –¥–ª—è MapFilters, —É–¥–∞–ª—ë–Ω –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –º–µ—Ç–æ–¥ _showEventCard. –ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ ‚Äî [changes/mobile-low-issues-l11-l27.md](changes/mobile-low-issues-l11-l27.md).
